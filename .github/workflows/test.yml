name: CI test

on:
  push:
    branches: [ main ]

jobs:
  build-linux:
    runs-on: ubuntu-20.04
    steps:
    - uses: actions/checkout@v2
    - name: test
      run: |
        CommitID=$(git rev-parse --short "${{ GITHUB.SHA }}")
        echo "CommitID=${CommitID}" >> $GITHUB_ENV
        mkdir test
        touch test.txt
        echo ${CommitID} > test.txt
    - name: Update
      uses: actions/upload-artifact@v2
      with:
        name: Test_${{ env.CommitID }}
        path: test.txt
  build-windows: 
    runs-on: windows-latest
    steps:
    - uses: actions/checkout@v2
    - name: test
      run: |
        echo ${{ GITHUB.SHA }}
    - name: Update
      uses: actions/upload-artifact@v2
      with:
        name: Test_${{ env.CommitID }}
        path: test.txt